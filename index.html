<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Multi-Divisa</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#bb86fc">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #bb86fc; --b: #0a0a0a; --c: #1e1e1e; --t: #ffffff; --fluorescent: #ccff00; }
        body { font-family: 'Poppins', sans-serif; background: var(--b); color: var(--t); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .calc-card { background: var(--c); width: 90%; max-width: 400px; padding: 25px; border-radius: 24px; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h2 { color: var(--p); font-weight: 900; text-align: center; margin-bottom: 25px; letter-spacing: 1px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.75rem; color: #888; margin-bottom: 8px; text-transform: uppercase; font-weight: 600; }
        input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #333; background: #121212; color: #fff; font-size: 1rem; box-sizing: border-box; transition: 0.3s; }
        input:focus { border-color: var(--p); outline: none; box-shadow: 0 0 10px rgba(187, 134, 252, 0.2); }
        .tasa-box { background: rgba(187, 134, 252, 0.05); padding: 15px; border-radius: 12px; border: 1px dashed #444; margin-bottom: 20px; }
        .result-box { background: linear-gradient(145deg, #1e1e1e, #121212); padding: 20px; border-radius: 16px; text-align: center; border: 1px solid var(--p); }
        .result-label { font-size: 0.7rem; color: var(--p); font-weight: bold; text-transform: uppercase; margin-bottom: 5px; }
        .result-value { font-size: 1.6rem; font-weight: 900; color: var(--fluorescent); }
        #btn-install { width: 100%; margin-top: 20px; padding: 12px; border-radius: 10px; border: none; background: var(--fluorescent); color: #000; font-weight: 900; cursor: pointer; display: none; }
    </style>
</head>
<body>

<div class="calc-card">
    <h2>FINANCE CALC</h2>
    
    <div class="tasa-box">
        <label>Tasa de Cambio (Bs por 1$)</label>
        <input type="number" id="tasa" value="50.00" oninput="calcular('USD')">
    </div>

    <div class="input-group">
        <label>Monto en Dólares ($)</label>
        <input type="number" id="usd" placeholder="0.00" oninput="calcular('USD')">
    </div>

    <div class="input-group">
        <label>Monto en Bolívares (Bs)</label>
        <input type="number" id="ves" placeholder="0.00" oninput="calcular('VES')">
    </div>

    <div class="result-box">
        <div class="result-label">Conversión Total</div>
        <div id="display" class="result-value">$ 0.00 / Bs 0.00</div>
    </div>

    <button id="btn-install">INSTALAR CALCULADORA</button>
</div>

<script>
    function calcular(tipo) {
        const tasa = parseFloat(document.getElementById('tasa').value) || 0;
        const usdInput = document.getElementById('usd');
        const vesInput = document.getElementById('ves');
        const display = document.getElementById('display');

        if (tipo === 'USD') {
            const usdVal = parseFloat(usdInput.value) || 0;
            vesInput.value = (usdVal * tasa).toFixed(2);
        } else {
            const vesVal = parseFloat(vesInput.value) || 0;
            usdInput.value = tasa > 0 ? (vesVal / tasa).toFixed(2) : 0;
        }

        display.innerText = `$ ${usdInput.value || "0.00"} / Bs ${vesInput.value || "0.00"}`;
    }

    // Service Worker Registration
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js');
        });
    }

    // Install logic
    let deferredPrompt;
    const btnInstall = document.getElementById('btn-install');
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        btnInstall.style.display = 'block';
    });
    btnInstall.addEventListener('click', () => {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt = null;
            btnInstall.style.display = 'none';
        }
    });
</script>
</body>
</html>
